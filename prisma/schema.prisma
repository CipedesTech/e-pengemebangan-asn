// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model m_user {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  password  String
  createdAt DateTime @default(now()) @map(name: "created_at")
  updatedAt DateTime @updatedAt @map(name: "updated_at")
  Role      m_role   @relation(fields: [roleId], references: [id])
  roleId    String
  Opd       m_opd    @relation(fields: [opdId], references: [id])
  opdId     String
}

model m_role {
  id        String   @id @default(uuid())
  name      String   @unique
  user      m_user[]
  createdAt DateTime @default(now()) @map(name: "created_at")
  updatedAt DateTime @updatedAt @map(name: "updated_at")
}

model m_diklat {
  id        String         @id @default(uuid())
  nama      String
  diklat    m_sub_diklat[]
  createdAt DateTime       @default(now()) @map(name: "created_at")
  updatedAt DateTime       @updatedAt @map(name: "updated_at")
}

model m_sub_diklat {
  id         String   @id @default(uuid())
  nama       String
  createdAt  DateTime @default(now()) @map(name: "created_at")
  updatedAt  DateTime @updatedAt @map(name: "updated_at")
  m_diklat   m_diklat @relation(fields: [m_diklatId], references: [id])
  m_diklatId String
}

model t_pns_diajukan {
  id                     String                @id @default(uuid())
  status                 String
  diklat                 String?
  createdAt              DateTime              @default(now()) @map(name: "created_at")
  updatedAt              DateTime              @updatedAt @map(name: "updated_at")
  pegawai_id             r_pegawai_aktual      @relation(fields: [r_pegawai_aktualId], references: [id])
  r_pegawai_aktualId     Int
  pelaksanaan_diklat_id  t_pelaksanaan_diklat? @relation(fields: [t_pelaksanaan_diklatId], references: [id])
  t_pelaksanaan_diklatId String?
}

model t_pelaksanaan_diklat {
  id             String           @id @default(uuid())
  nama           String
  diklat         String
  pagu           Int
  kuota          Int
  createdAt      DateTime         @default(now()) @map(name: "created_at")
  updatedAt      DateTime         @updatedAt @map(name: "updated_at")
  t_pns_diajukan t_pns_diajukan[]
}

model m_opd {
  id        String   @id @default(uuid())
  kode_opd  String
  nama      String
  createdAt DateTime @default(now()) @map(name: "created_at")
  updatedAt DateTime @updatedAt @map(name: "updated_at")
  user      m_user[]
}

model r_pegawai_aktual {
  id                   Int              @id @default(autoincrement())
  id_pegawai           Int
  nip                  String           @db.VarChar(20)
  nip_baru             String           @db.VarChar(50)
  nama_pegawai         String           @db.VarChar(50)
  gelar_nonakademis    String?          @db.VarChar(25)
  gelar_depan          String?          @db.VarChar(25)
  gelar_belakang       String?          @db.VarChar(25)
  gender               String?          @db.VarChar(2)
  tempat_lahir         String?          @db.VarChar(50)
  tanggal_lahir        DateTime?        @db.Date
  status_perkawinan    String?          @db.VarChar(20)
  status_kepegawaian   String?          @db.VarChar(100)
  tmt_cpns             DateTime?        @db.Date
  tmt_pns              DateTime?        @db.Date
  kode_golongan        Int?
  nama_golongan        String?          @db.VarChar(100)
  nama_pangkat         String?          @db.VarChar(100)
  tmt_pangkat          DateTime?        @db.Date
  mk_gol_tahun         Int?
  mk_gol_bulan         Int?
  id_unor              Int?
  kode_unor            String?          @db.VarChar(100)
  nama_unor            String?          @db.VarChar(255)
  jab_type             String?          @db.VarChar(100)
  id_jenjang_jabatan   Int?
  tingkat              String?          @db.VarChar(100)
  nama_jenjang_jabatan String?          @db.VarChar(100)
  nomenklatur_jabatan  String?          @db.VarChar(255)
  nomenklatur_pada     String?          @db.VarChar(255)
  tugas_tambahan       String?          @db.VarChar(255)
  tmt_jabatan          DateTime?        @db.Date
  kode_ese             Int?
  nama_ese             String?          @db.VarChar(100)
  tmt_ese              DateTime?        @db.Date
  kelas_jabatan        String?          @db.VarChar(2)
  nilai_jabatan        String?          @db.VarChar(4)
  nama_jenjang         String?          @db.VarChar(100)
  nama_jenjang_rumpun  String?          @db.VarChar(100)
  tanggal_lulus        DateTime?        @db.Date
  last_updated         DateTime?        @default(now()) @db.Timestamp(0)
  t_pns_diajukan       t_pns_diajukan[]

  @@index([gender], map: "gender")
  @@index([id_pegawai], map: "id_pegawai")
  @@index([id_unor], map: "id_unor")
  @@index([jab_type], map: "jab_type")
  @@index([kode_ese], map: "kode_ese")
  @@index([kode_golongan], map: "kode_golongan")
  @@index([kode_unor], map: "kode_unor")
  @@index([nama_jenjang], map: "nama_jenjang")
  @@index([nama_jenjang_rumpun], map: "nama_jenjang_rumpun")
  @@index([nip_baru], map: "nip_baru")
  @@index([nomenklatur_jabatan], map: "nomenklatur_jabatan")
  @@index([status_kepegawaian], map: "status_kepegawaian")
  @@index([status_perkawinan], map: "status_perkawinan")
  @@index([tmt_pns], map: "tmt_pns")
}
